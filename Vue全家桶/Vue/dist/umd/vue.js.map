{"version":3,"file":"vue.js","sources":["../../src/util.js","../../src/global-api/index.js","../../src/compiler/generate.js","../../src/compiler/perse.js","../../src/compiler/index.js","../../src/observer/dep.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/vdom/index.js","../../src/index.js"],"sourcesContent":["//访问和设置vm，代理到访问和设置vm[data]\nexport function proxy(vm, data, key) {\n    Object.defineProperty(vm, key, {\n        get() {\n            return vm[data][key]\n        },\n        set(newValue) {\n            vm[data][key] = newValue\n        }\n    })\n}\n//添加不可枚举、不可遍历的属性\nexport function defineProperty(data, key, value) {\n    Object.defineProperty(data, key, {\n        enumerable: false, //不可枚举，不能被循环出来，相当于隐藏属性\n        configurable: false,\n        value\n    })\n}\n\n\nexport const LIFECYCLE_HOOKS = [\n    'beforeCreate',\n    'created',\n    'beforeMount',\n    'mounted',\n    'beforeUpdate',\n    'updated',\n    'beforeDestory',\n    'destroyed'\n];\n\n//策略模式\nconst strats = {};\nstrats.data = function(parentVal, childVal){\n    return childVal\n};\nstrats.computed = function(){};\nstrats.watch = function(){};\n//生命周期的合并\nfunction mergeHook(parentVal, childVal){\n    if (childVal) {\n        if (parentVal) {\n            return parentVal.concat(childVal);\n        }else{\n            return [childVal]\n        }\n    }else{ \n        return parentVal\n    }\n}\n//每个生命周期的合并策略都是上面的mergeHook\nLIFECYCLE_HOOKS.forEach(hook => {\n    strats[hook] = mergeHook\n})\n\n//合并选项\nexport function mergeOptions(parent, child) {\n    const options = {};\n    //遍历父亲 可能是父亲有\n    for (const key in parent) {\n        mergeField(key);\n    }\n\n    //父亲没有 儿子有\n    for (const key in child) {\n        if (!parent.hasOwnProperty(key)) {\n            mergeField(key);\n        }\n    }\n\n\n    function mergeField(key){\n        if (strats[key]) {\n            options[key] = strats[key](parent[key], child[key]);\n        }else{\n            options[key] = child[key];\n        }\n    }\n\n    return options;\n}","import { mergeOptions } from \"../util\";\n\nexport function initGlobalApi(Vue){\n    Vue.options = {};\n    Vue.mixin = function(mixin){\n        //合并所有配置项\n        this.options = mergeOptions(this.options, mixin);\n        //我们目标结构是 this.options = {created: [createdA,ceatedB,...]}\n    }\n\n}","//把ast元素的属性，生成render字符串\nfunction genProps(attrs){\n    let str = '' ;\n    attrs.forEach(attr => {\n        if (attr.name === \"style\") { //style比较特殊 进行特殊处理\n            let obj = {};\n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(':');\n                obj[key] = value;\n            });\n            attr.value = obj;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\n    });\n    return `{${str.slice(0, -1)}}`;  //去掉多余逗号\n}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nfunction gen(node) {\n    if (node.type === 1) {\n        return generate(node);\n    }else{\n        const text = node.text;\n        //如果不存在 {{}} 这种变量\n        if (!defaultTagRE.test(text)) {\n            return `_v(${JSON.stringify(text)})`\n        }\n        //存在的话，用正则一点点把字符串拆开，给变量加上 _s()\n        let tokens = []; //存放每一段代码\n        let lastIndex = defaultTagRE.lastIndex = 0; //全局模式，每次index置为0 , 因为上面执行了一次 defaultTagRE.test 所以政策而index要归位\n        let match, index; // 匹配到的结果\n        while (match = defaultTagRE.exec(text)) {\n            index = match.index;\n            //说明匹配到的结果不是第一个元素，那说明前面这部分是普通字符串\n            if (index > lastIndex) {\n                tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n            }\n            tokens.push(`_s(${match[1].trim()})`);\n            lastIndex = index + match[0].length;\n        }\n        if (lastIndex < text.length) {\n            tokens.push(JSON.stringify(text.slice(lastIndex)));\n        }\n        return `_v(${tokens.join('+')})`;\n\n    }   \n}\n\nfunction genChildren(el) {\n    const children = el.children;\n    if (children) {\n        return children.map(child => gen(child)).join(',')\n    }\n}\n\n//核心就是拼遍历ast，然后生成render函数的字符串\nexport function generate(el) {\n    const children = genChildren(el);\n    // _c: 创建元素  _v: 创建文本  _s: {{}}变量\n    let code = `_c('${el.tag}', ${\n        el.attrs.length ? `${genProps(el.attrs)}` : 'undefined'        //有属性、组合属性字符串\n    }${\n        children ? `, ${children}` : ''\n    })`;\n\n    return code;\n}","//解析html的正则表达式们\nconst unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst ncname = \"[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z\" + (unicodeRegExp.source) + \"]*\";\nconst qnameCapture = \"((?:\" + ncname + \"\\\\:)?\" + ncname + \")\";\nconst startTagOpen = new RegExp((\"^<\" + qnameCapture));\nconst startTagClose = /^\\s*(\\/?)>/;\nconst endTag = new RegExp((\"^<\\\\/\" + qnameCapture + \"[^>]*>\"));\n\n//html to ast\nexport function parseHTML(html) {\n    function createASTElement(tagName, attrs) {\n        return {\n            tag: tagName,\n            type: 1, //html 元素 type是1\n            children: [],\n            attrs,\n            parent: null\n        }\n    }\n    let root;\n    let currentParent;\n    let stack = []; //用栈 判断标签时候合法\n    function start(tagName, attrs) {\n        let element = createASTElement(tagName, attrs);\n        if (!root) {\n            root = element;\n        }\n        currentParent = element;\n        stack.push(element);\n    }\n\n    function end(tagName) {\n        let element = stack.pop(); //取出栈最后一个 进行比较 看看标签是否配对\n        currentParent = stack[stack.length-1];\n        if (currentParent) { //闭合时知道，当前标签的父子关系\n            element.parent = currentParent;\n            currentParent.children.push(element);\n        }\n    }\n\n    function chars(text) {\n        text = text.replace(/\\s/g, '');\n        if (text) {\n            currentParent.children.push({\n                type: 3,//html 文本 type是3\n                text\n            })\n        }\n    }\n\n    //解析过程 边解析边删除，直到所有解析完成\n    while (html) { //只要Html不空，就一直解析\n        //观察规律，看当前第一个字符是不是 < ，是 < 就一定是一个标签\n        let textEnd = html.indexOf(\"<\");\n        if (textEnd === 0) {\n            //TODO: v-bind :value 等等\n            //先看看是不是开始标签，那么先解析开始标签\n            const startTagMatch = parseStartTag();\n            if (startTagMatch) {\n                start(startTagMatch.tagName, startTagMatch.attrs);\n                continue;\n            }\n            //不是开始标签，就是结束标签\n            const endTagMatch = html.match(endTag);\n            if (endTagMatch) {\n                end(endTagMatch[0]);\n                advance(endTagMatch[0].length);\n                continue;\n            }\n        }\n        let text;\n        //< 位置 大于0 当前字符串是文本\n        if (textEnd > 0) {\n            text = html.substring(0, textEnd);\n        }\n        //有文本 记录文本 删除文本\n        if (text) {\n            advance(text.length);\n            chars(text);\n        }\n    }\n\n    function advance(n) { //截取掉匹配到内容，重新更新html\n        html = html.substring(n);\n    }\n\n    function parseStartTag() {\n        const start = html.match(startTagOpen);\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs: []\n            };\n            advance(start[0].length);\n            //开始标签截取完了，该匹配属性了, 好多属性，所以要遍历\n            //如果是开始标签结束了，那么没有属性了，所以先判断 开始标签没有结束\n            let end, attr;\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                match.attrs.push({\n                    name: attr[1],\n                    value: attr[3] || attr[4] || attr[5] //属性的三种写法，match出来结果，在数组的不同位置\n                });\n                advance(attr[0].length);\n            }\n            //如果开始标签结束了\n            if (end) {\n                advance(end[0].length);\n                return match;\n            }\n        }\n    }\n    return root;\n}","import { generate } from \"./generate\";\nimport { parseHTML } from \"./perse\";\n\n//把template编译成render函数\nexport function compileToFunctions(template) {\n    //1、html转成AST\n    const ast = parseHTML(template);\n\n    //2、TODO:优化静态节点\n\n    //3、AST重新生成代码\n    const code = generate(ast);\n    \n    //4、把code字符串转化成真正的函数 通过with进行设置取值\n    const render = new Function(`with(this){return ${code}}`);\n\n    return render;\n    \n}","let id = 0;\nclass Dep{\n    constructor(){\n        this.subs = [];\n        this.id = id++;\n    }\n    //get 收集watcher\n    depend(){\n        Dep.target.addDep(this); //实现双向记忆 dep和watcher\n    }\n    //dep 收集watcher\n    addSub(watcher){  \n        this.subs.push(watcher);\n    }\n    //set 执行watcher\n    notify(){\n        this.subs.forEach( watcher => watcher.update() );\n    }\n}\n\nexport default Dep;\n\n\nDep.target = null;\n\nexport function pushTarget(watcher){\n    Dep.target = watcher;  //全局变量保留watcher\n}\n\n\nexport function popTarget(){\n    Dep.target = null; //将变量删除掉\n}\n\n//多对多的关系，每个属性都有一个dep  dep是干嘛的，用来收集watcher 的\n\n//dep 可以存多个watcher 其他的比如还有 vm.$watcher\n//一个watcher可以对应多个dep","import { popTarget, pushTarget } from \"./dep\";\n\nlet id = 0;\nclass Watcher{\n    constructor(vm, exprOrFn, cb, options){\n        this.vm = vm; //vm实例\n        this.exprOrFn = exprOrFn; //表达式或者函数 如 vm._update(vm._render);\n        this.cb = cb;\n        this.options = options;\n        this.id = id++;\n        this.deps = [];\n        this.depsId = new Set();\n        if (typeof exprOrFn === 'function') {\n            this.getter = exprOrFn;\n        }\n        this.get(); //默认调用get方法\n    }\n    addDep(dep){\n        let id = dep.id;\n        if (!this.depsId.has(id)) {\n            this.deps.push(dep);\n            this.depsId.add(id);\n            dep.addSub(this);\n        }\n    }\n    get(){ \n        //Dep.target加了一个watcher\n        pushTarget(this); //当前watcher实例\n        this.getter(); //渲染页面就要取值，就要调用get方法\n        popTarget();\n    }\n    update(){\n        this.get();\n    }\n}\n\nexport default Watcher","export function patch(oldVnode, vnode){\n    //将虚拟dom转化为真实节点 递归创建元素的过程\n    // oldVnode => id#app  vnode => 我们根据模板产生的虚拟dom\n    let el = createElm(vnode); //产生真实dom\n    let parentElm = oldVnode.parentNode; // 获取旧的节点的父亲\n    //为什么insertBefore 保留原来的位置\n    parentElm.insertBefore(el, oldVnode.nextSibiling);//当前真实元素插入到app的后面\n    parentElm.removeChild(oldVnode); //删除旧的节点\n    return el;\n}\n\nfunction createElm(vnode){\n    let { tag, data, key, children, text} = vnode;\n    if (typeof tag === \"string\") { //创建元素，放到vnode.el上\n        vnode.el = document.createElement(tag);\n\n        //只有元素才有属性\n        updateProperties(vnode);\n        children.forEach(child => {\n            vnode.el.appendChild(createElm(child));\n        });\n    }else{ \n        vnode.el = document.createTextNode(text)\n    }\n    return vnode.el;\n}\n\nfunction updateProperties(vnode){\n    let el = vnode.el;\n    let newProps = vnode.data || {};\n\n    for (const key in newProps) {\n        if (key == \"style\") {\n            for (const styleName in newProps.style) {\n                el.style[styleName] = newProps.style[styleName];\n            }\n        }else if(key === \"class\"){\n            el.className = newProps[key];\n        }else{\n            el.setAttribute(key, newProps[key]);\n        }\n    }\n}","import Watcher from \"./observer/watcher\";\nimport { patch } from \"./vdom/patch\";\n\nexport function lifecycleMixin(Vue){\n    Vue.prototype._update = function(vnode){\n        const vm = this;\n        //新创建的替换老的\n        vm.$el = patch(vm.$el, vnode);\n    }\n}\n\nexport function mountComponent(vm, el){ \n    callHook(vm, 'beforeMount');\n    //先调用render方法创建虚拟节点，再将虚拟节点渲染到页面上 vue核心！！！！\n    const updateComponent = () => {\n        vm._update(vm._render());\n    }\n    new Watcher(vm,updateComponent,() => {\n        callHook(vm, 'beforeUpdate');\n    },true)\n    // vm._update(vm._render());\n\n    callHook(vm, 'mounted');\n}\n\nexport function callHook(vm, hook){\n    const handlers = vm.$options[hook];\n    if (handlers) {\n        for (let i = 0; i < handlers.length; i++) {\n            handlers[i].call(vm);\n        }\n    }\n}","/**\n * 重写数组方法\n * 思路：先继承，后重写，用的时候，先找实例\n */\n\nconst oldArrayProtoMethods = Array.prototype;\n\nexport const arrayMethods = Object.create(oldArrayProtoMethods);\n\nconst methods = [\n    \"push\",\n    \"pop\",\n    \"shift\",\n    \"unshift\",\n    \"sort\",\n    \"reverse\",\n    \"splice\",\n];\n//先走自己的逻辑，然后调用原来的逻辑\nmethods.forEach(method => {\n    arrayMethods[method] = function (...args) {\n        \n        const ob = this.__ob__;\n        const result = oldArrayProtoMethods[method].apply(this, args); //this 就是 observer constructor里的data\n        let inserted;\n        //数组增加项，有可能是对象类型，应该再次被观测\n        switch (method) {\n            case \"push\":\n            case \"unshift\":\n                inserted = args;\n                break;\n            case \"splice\":\n                inserted = args.slice(2);\n            default:\n                break;\n        }\n        if (inserted) {\n            ob.observeArray(inserted);\n        }\n        ob.dep.notify();\n        return result;\n    }\n})","import { defineProperty } from \"../util\";\nimport { arrayMethods } from \"./array\";\nimport Dep from \"./dep\";\n\n/**\n * 用 defineProperty 递归把data所有属性都变成响应式\n */\nclass Observer{\n    constructor(data){\n        this.dep = new Dep(); //如果是对象、数组，给对象或者数组本身增加dep（注意不是里面的属性哦，而是整个数组或者对象）\n        //hack骚操作，把observeArray挂在调用函数的this上，在array.js里还可以使用。同时也可以标记对象或者数组已经被观测。\n        defineProperty(data, \"__ob__\", this);\n        //一步一步把defineProperty全都重新定义一下 使原来的对象每个属性发生变化的时候 都能get到，也就是将一个普通对象变成一个响应式对象\n        if (Array.isArray(data)) {\n            //函数劫持 考虑性能原因 不使用defineproperty 选择重新方法\n            data.__proto__ = arrayMethods;\n            //如果数组里嵌套对象，还需要监控对象\n            this.observeArray(data);\n        } else {\n            this.walk(data);\n        }\n    }\n    observeArray(data){\n        data.forEach(item => {\n            observe(item);\n        })\n    }\n    walk(data){\n        const keys = Object.keys(data);\n        keys.forEach(key => {\n            defineReactive(data, key, data[key]); \n        })\n    }\n}\n//Vue.util.defineReactive 把对象的某个属性变成响应式\nfunction defineReactive(data, key, value) {\n    let ob = observe(value);\n    let dep = new Dep(); //每个属性都有一个dep dep用来存watcher\n    Object.defineProperty(data, key, {\n        //当页面取值时，说明这个值用来渲染了，那么我就将这个watcher和这个属性对应起来\n        //收集watcher\n        get(){\n            if (Dep.target) { //让这个属性的dep记住这个watcher\n                dep.depend();\n                if (ob) {\n                    ob.dep.depend();\n                }\n            }\n            return value\n        },\n        //更新watcher\n        set(newValue){\n            if(value === newValue) return ;\n            observe(newValue);\n            value = newValue;\n            dep.notify();\n        }\n    })\n}\n\n\n\nexport function observe(data) {\n    if(typeof data !== \"object\" || data == null || data.__ob__){\n        return ;\n    }\n    return new Observer(data);\n}","import { observe } from \"./observer/index\";\nimport { proxy } from \"./util\";\n\nexport function initState(vm) {\n    const opts = vm.$options;\n    //按照优先级先后初始化，如果后面的和前面的重名了，怎么怎么样\n    if (opts.props) {\n        initProps(vm);\n    }\n    if (opts.methods) {\n        initMethods(vm);\n    }\n    if (opts.data) {\n        initData(vm);\n    }\n    if (opts.watch) {\n        initWatch(vm);\n    }\n    if (opts.computed) {\n        initComputed(vm);\n    }\n}\n\nfunction initProps() {}\n\nfunction initMethods() {}\n\nfunction initData(vm) {\n    let data = vm.$options.data;\n    //保存所有data，\n    vm._data = data = typeof data ? data.call(vm) : data;\n\n    //把vm.arr 代理到 vm._data.arr 实现真正的获取data\n    for (const key in data) {\n        proxy(vm, \"_data\", key);\n    }\n    //有对象了 就要劫持 \n    //对象的劫持方案：object.defineProperty();\n    //对象里嵌套数组的劫持方案: 单独处理\n    observe(data); //让对象重新定义set get\n}\n\nfunction initWatch() {}\n\nfunction initComputed() {}","import { compileToFunctions } from \"./compiler/index\";\nimport { callHook, mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\nimport { mergeOptions } from \"./util\";\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        const vm = this;\n        vm.$options = mergeOptions(vm.constructor.options, options);\n        callHook(vm, 'beforeCreate');\n        //所有初始化操作，都在initState里\n        initState(vm);\n        callHook(vm, 'created');\n        // initEvents();\n        //需要渲染元素\n        if (vm.$options.el) {\n            vm.$mount(vm.$options.el);\n        }\n    }\n\n    Vue.prototype.$mount = function (el) {\n        const vm = this;\n        const options = vm.$options;\n        el = document.querySelector(el);\n        vm.$el = el;\n        //按照优先级处理，保证最后统一为 render函数渲染\n        if (!options.render) {\n            let template = options.template;\n            if (!template && el) {\n                template = el.outerHTML;\n            }\n            const render = compileToFunctions(template);\n            options.render = render;\n        }\n        //这里保证有render方法，开始渲染挂载元素\n        mountComponent(vm, el)\n    }\n}","export function renderMixin(Vue){\n    //创建元素\n    Vue.prototype._c = function(){\n        return createElement(...arguments);\n    }\n    //stringify\n    Vue.prototype._s = function(val){\n        return val == null ? \"\" : typeof val === \"object\" ? JSON.stringify(val) : val;\n    }\n    //创建文本元素\n    Vue.prototype._v = function(text){\n        return createTextVnode(text);\n    }\n \n    Vue.prototype._render = function(){\n        const vm = this;\n        const render = vm.$options.render;\n        let vnode = render.call(vm);\n        return vnode ;\n    }\n}\n\nfunction createElement(tag, data={}, ...children){\n    return vnode(tag, data, data.key, children);\n}\n\nfunction createTextVnode(text){\n    return vnode(undefined, undefined, undefined, undefined, text);\n}\n\n//产生虚拟dom的\nfunction vnode(tag, data, key, children, text){\n    return {\n        tag,\n        data,\n        key,\n        children,\n        text\n    }\n}","import { initGlobalApi } from \"./global-api/index\";\nimport { initMixin } from \"./init\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./vdom/index\";\n\n/**\n * Vue 类的声明\n * @param {object} options 用户 new Vue() 时传的配置对象\n */\nfunction Vue(options) {\n    this._init(options); //组件初始化的入口\n}\n\n//Vue把原型方法拆成一个一个又一个的插件，利于拆分，结构拆分，所有原型拓展都在这里\n//插件1：初始化操作都在这里\ninitMixin(Vue);\n//插件2：生命周期，其实就是渲染 指的是组件的生命周期 不是常规的生命周期  组件的挂载、更新\nlifecycleMixin(Vue);\n//插件3：render生成虚拟dom\nrenderMixin(Vue);\n\n\n//静态方法\ninitGlobalApi(Vue);\n\n\nexport default Vue;"],"names":["proxy","vm","data","key","Object","defineProperty","get","set","newValue","value","enumerable","configurable","LIFECYCLE_HOOKS","strats","parentVal","childVal","computed","watch","mergeHook","concat","forEach","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","initGlobalApi","Vue","mixin","genProps","attrs","str","attr","name","obj","split","item","JSON","stringify","slice","defaultTagRE","gen","node","type","generate","text","test","tokens","lastIndex","match","index","exec","push","trim","length","join","genChildren","el","children","map","code","tag","unicodeRegExp","attribute","ncname","source","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTML","html","createASTElement","tagName","root","currentParent","stack","start","element","end","pop","chars","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","advance","substring","n","compileToFunctions","template","ast","render","Function","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","Watcher","exprOrFn","cb","deps","depsId","Set","getter","dep","has","add","addSub","patch","oldVnode","vnode","createElm","parentElm","parentNode","insertBefore","nextSibiling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","prototype","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","$options","i","call","oldArrayProtoMethods","Array","arrayMethods","create","methods","method","ob","__ob__","args","result","apply","inserted","observeArray","notify","Observer","isArray","__proto__","walk","observe","keys","defineReactive","depend","initState","opts","props","initData","_data","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","arguments","_s","val","_v","createTextVnode","undefined"],"mappings":"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"}