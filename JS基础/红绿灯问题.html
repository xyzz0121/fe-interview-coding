<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çº¢ç»¿ç¯é—®é¢˜</title>
</head>
<body>
    <script>
        /*
            ğŸš¥ çº¢ç¯ä¸‰ç§’äº®ä¸€æ¬¡ï¼Œç»¿ç¯ä¸€ç§’äº®ä¸€æ¬¡ï¼Œé»„ç¯2ç§’äº®ä¸€æ¬¡ï¼›å¦‚ä½•è®©ä¸‰ä¸ªç¯ä¸æ–­äº¤æ›¿é‡å¤äº®ç¯ï¼Ÿï¼ˆç”¨ Promse å®ç°ï¼‰
            æ€»ç»“ï¼šä¸‰æ®µå¼ 
            ç¬¬ä¸€æ®µï¼šè¾“å‡ºæ–¹æ³•ï¼Œ 
            ç¬¬äºŒæ®µï¼šå¼€ç¯æ–¹æ³• è¿”å›ä¸€ä¸ªpromise é‡Œé¢å®šæ—¶å™¨æ“ä½œ
            ç¬¬ä¸‰æ®µï¼šè°ƒç”¨å¼€ç¯æ–¹æ³•
        */
        const red = () => { console.log("red") };
        const yellow = () => { console.log("yellow") };
        const green = () => { console.log("green") };

        const light = (timer, fn) => 
            new Promise((resole, reject)=>{
                setTimeout(() => {
                    fn();
                    resole()
                }, timer);
            });

        const  step = () => {
            light(3000, red)
            .then(()=>{
                return light(1000, green);
            })
            .then(()=>{
                return light(2000, yellow);
            })
            .then(()=>{
                step();
            })
        }

        step();
    </script>
</body>
</html>